<script>
    (function() {
        var buttons = document.getElementsByClassName("spoiler-control");
        for (var i = 0; i < buttons.length; i++) {
            var button = buttons[i];
            button.innerHTML = button.getAttribute("toggle1");
            button.onclick = function(e) {
                var startstate = (this.innerHTML === this.getAttribute("toggle1"));
                // Yep, some hardcoded awfulness here
                var controlled = this.parentNode.nextElementSibling;
                if (startstate) {
                    this.innerHTML = this.getAttribute("toggle2");
                    controlled.className = "shown";
                } else {
                    this.innerHTML = this.getAttribute("toggle1");
                    controlled.className = "hidden";
                }
            };
        }
  })();
</script>
